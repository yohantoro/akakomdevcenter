!function(e){function t(e){return parseInt(e.replace("px",""))}function n(e){"left"==e.xorigin?e.xorigin=0:"middle"==e.xorigin||"centre"==e.xorigin||"center"==e.xorigin?e.xorigin=.5:"right"==e.xorigin&&(e.xorigin=1),"top"==e.yorigin?e.yorigin=0:"middle"==e.yorigin||"centre"==e.yorigin||"center"==e.yorigin?e.yorigin=.5:"bottom"==e.yorigin&&(e.yorigin=1)}function i(e,t){for(var n=0;n<e.length;n++)e[n].xparallax&&e[n].element.css("left",e[n].xoffset-.5*t.width*e[n].xdynamic),e[n].yparallax&&e[n].element.css("top",e[n].yoffset-.5*t.height*e[n].ydynamic)}function r(e,t,n){if(e.pageX>=t.left&&e.pageX<=t.width+t.left&&e.pageY>=t.top&&e.pageY<=t.height+t.top){for(var i=0;i<n.length;i++)n[i].xtarget=n[i].xoffset-(e.pageX-t.left)*n[i].xdynamic,n[i].ytarget=n[i].yoffset-(e.pageY-t.top)*n[i].ydynamic;if(t.inside)for(var i=0;i<n.length;i++)n[i].x=n[i].xtarget,n[i].y=n[i].ytarget;else{for(var i=0;i<n.length;i++)n[i].x=n[i].xtarget+(n[i].x-n[i].xtarget)*t.softfactor,n[i].y=n[i].ytarget+(n[i].y-n[i].ytarget)*t.softfactor;var r=Math.ceil(n[n.length-1].x-n[n.length-1].xtarget);r<t.softlimit&&r>-1*t.softlimit&&(t.inside=!0)}for(var i=0;i<n.length;i++)n[i].xparallax&&n[i].element.css("left",n[i].x),n[i].yparallax&&n[i].element.css("top",n[i].y)}else t.inside&&(t.inside=!1)}e.fn.jparallax=function(n){for(var a={viewport:e.extend({},e.fn.jparallax.settings.viewport,n.viewport),mouseport:e.extend({},e.fn.jparallax.settings.mouseport,n.mouseport),layer:e.extend({},e.fn.jparallax.settings.layer,n.layer),anim:e.extend({},e.fn.jparallax.settings.anim,n.anim)},l=[],o=1;o<arguments.length;o++)l.push(e.extend({},a.layer,arguments[o]));return this.each(function(){var n=e(this),o=e.extend({},{element:n},a.viewport),s=e.extend({},{element:o.element},a.mouseport),f=[];e.extend(o,{width:o.element.width(),height:o.element.height()}),e.extend(s,{width:s.element.width(),height:s.element.height(),top:s.element.offset().top,left:s.element.offset().left}),n.children().css("position","absolute");for(var g=0;g<n.children().length;g++){f[g]=e.extend({},a.layer,l[g],{element:n.children("*:eq("+g+")")}),f[g]=e.extend({},{width:t(f[g].element.css("width")),height:t(f[g].element.css("height")),xtravel:t(f[g].element.css("width"))-o.width,ytravel:t(f[g].element.css("height"))-o.height,xtarget:0,ytarget:0,x:0,y:0},f[g]),e.extend(f[g],{xoffset:(o.width-f[g].width+f[g].xtravel)*f[g].xorigin,yoffset:(o.height-f[g].height+f[g].ytravel)*f[g].yorigin,xdynamic:f[g].xtravel/o.width,ydynamic:f[g].ytravel/o.height});for(var h=0;h<f[g].element.children().length;h++)e.extend(f[g],{content:[{element:f[g].element.children().eq(h)}]}),e.extend(f[g].content[h],{anchor:f[g].content[h].element.children("a").attr("name"),width:t(f[g].content[h].element.css("width")),height:t(f[g].content[h].element.css("height")),left:t(f[g].content[h].element.css("left")),top:t(f[g].content[h].element.css("top"))}),e.extend(f[g].content[h],{xoffset:o.width/2-(f[g].content[h].left+f[g].content[h].width/2),yoffset:o.height/2-(f[g].content[h].top+f[g].content[h].height/2)})}i(f,o),e().mousemove(function(e){r(e,s,f)})})},e.fn.jparallax.settings={viewport:{},mouseport:{active:!0,inside:!1,softfactor:.82,softlimit:6},layer:{xparallax:!0,yparallax:!0,xorigin:"centre",yorigin:"centre"},animation:{timerpause:5e3,duration:600},trigger:!1},e.fn.jparallax.triggerResponse=function(e){var t=1,n=0;for(t=1;t<layer.length;t++){var i=!1;for(n=0;n<layer[t].content.length;n++)if(layer[t].content[n].anchor==e){i=!0;break}if(i)break}for(l=1;l<layer.length;l++)l!=t&&layer[l].canvas.animate({left:layer[0].width},animDuration);layer[t].canvas.animate({top:layer[t].content[n].topOffset,left:layer[t].content[n].leftOffset},animDuration)},e.fn.jparallax.timerResponse=function(e){var t;t=content[e].pause?content[e].pause:pause;for(var n=e;e==n;)e=Math.ceil(Math.random()*layer[1].content.length)-1;triggerResponse(e),timer=setTimeout("timerResponse("+e+")",t)},n(e.fn.jparallax.settings.layer),e(function(){})}(jQuery);