function virtualpaginate(e){this.piececlass=e.piececlass;var t="undefined"==typeof e.piececontainer?"div":e.piececontainer;this.pieces=virtualpaginate.collectElementbyClass(e.piececlass,t),this.chunksize="undefined"==typeof e.pieces_per_page?1:e.pieces_per_page>0&&e.pieces_per_page<this.pieces.length?e.pieces_per_page:this.pieces.length,this.pagecount=Math.ceil(this.pieces.length/this.chunksize),this.wraparound=e.wraparound||!1,this.paginatediv=[],this.flatviewlinks=[],this.cpspan=[],this.selectmenu=[],this.prevlinks=[],this.nextlinks=[],this.persist=e.persist;var i=virtualpaginate.getCookie("dd_"+this.piececlass)||0,a=virtualpaginate.urlparamselect(this.piececlass);this.currentpage="number"==typeof a?a:this.persist?i:e.defaultpage,this.currentpage=this.currentpage<this.pagecount?parseInt(this.currentpage):0,this.showpage(this.currentpage)}document.write('<style type="text/css">.hidepiece{display:none}\n@media print{.hidepiece{display:block !important;}}\n</style>'),virtualpaginate.prototype.navigate=function(e){if((this.wraparound||"previous"!=e||0!=this.currentpage)&&(this.wraparound||"next"!=e||this.currentpage!=this.pagecount-1)){var t=this.currentpage;this.currentpage="previous"==e?this.currentpage>0?this.currentpage-1:0==this.currentpage?this.pagecount-1:0:"next"==e?this.currentpage<this.pagecount-1?this.currentpage+1:0:"first"==e?0:"last"==e?this.pagecount-1:parseInt(e),this.currentpage=this.currentpage<this.pagecount?this.currentpage:0,this.showpage(this.currentpage);for(var i=0;i<this.paginatediv.length;i++)this.flatviewpresent&&(this.flatviewlinks[i][t].className=""),this.selectmenupresent&&(this.selectmenu[i].selectedIndex=this.currentpage),this.flatviewpresent&&(this.flatviewlinks[i][this.currentpage].className="selected");if(!this.wraparound){for(var a=0;a<this.prevlinks.length;a++)virtualpaginate.setcssclass(this.prevlinks[a],"disabled",0==this.currentpage?"add":"remove");for(var a=0;a<this.nextlinks.length;a++)virtualpaginate.setcssclass(this.nextlinks[a],"disabled",this.currentpage==this.pagecount-1?"add":"remove")}}},virtualpaginate.prototype.buildpagination=function(e,t){var e="string"==typeof e?[e]:e,i=e.shift(),a=document.getElementById(i).innerHTML;this.paginate_build(i,0,t);for(var s=0;s<e.length;s++)document.getElementById(e[s]).innerHTML=a,this.paginate_build(e[s],s+1,t)},virtualpaginate.collectElementbyClass=function(e,t){if(document.querySelectorAll)var i=document.querySelectorAll(t+"."+e);else for(var i=[],a=document.getElementsByTagName(t),s=0;s<a.length;s++)virtualpaginate.setcssclass(a[s],e,"check")&&(i[i.length]=a[s]);return i},virtualpaginate.setcssclass=function(e,t,i){var a=new RegExp("(^|\\s+)"+t+"($|\\s+)","ig");return"check"==i?a.test(e.className):void("remove"==i?e.className=e.className.replace(a,""):"add"!=i||a.test(e.className)||(e.className+=" "+t))},virtualpaginate.urlparamselect=function(e){var t=window.location.search.match(new RegExp(e+"=(\\d+)","i"));return null==t?null:parseInt(RegExp.$1)},virtualpaginate.getCookie=function(e){var t=new RegExp(e+"=[^;]+","i");return document.cookie.match(t)?document.cookie.match(t)[0].split("=")[1]:null},virtualpaginate.setCookie=function(e,t){document.cookie=e+"="+t},virtualpaginate.prototype.showpage=function(e){for(var t=this.pieces.length,i=e*this.chunksize,a=i+this.chunksize-1,s=0;t>s;s++)this.pieces[s].style.display=s>=i&&a>=s?"block":"none";if(this.persist&&virtualpaginate.setCookie("dd_"+this.piececlass,this.currentpage),this.cpspan.length>0)for(var n=0;n<this.cpspan.length;n++)this.cpspan[n].innerHTML="Page "+(this.currentpage+1)+"/"+this.pagecount},virtualpaginate.prototype.paginate_build=function(e,t,i){var a=document.getElementById(e);if(this.chunksize==this.pieces.length)return void(a.style.display="none");a.innerHTML;a.getElementsByTagName("select").length>0&&this.paginate_build_selectmenu(a.getElementsByTagName("select")[0],t,i),a.getElementsByTagName("a").length>0&&this.paginate_build_regularlinks(a.getElementsByTagName("a"));for(var s=a.getElementsByTagName("span"),n=0;n<s.length;n++)"flatview"==s[n].className?this.paginate_output_flatview(s[n],t,i):"paginateinfo"==s[n].className&&this.paginate_build_cpinfo(s[n],t);this.paginatediv[t]=a},virtualpaginate.prototype.paginate_output_flatview=function(e,t,i){for(var a="",i=i||new Array,s=0;s<this.pagecount;s++)a+="undefined"!=typeof i[s]?'<a href="#flatview" rel="'+s+'">'+i[s]+"</a> ":'<a href="#flatview" rel="'+s+'">'+(s+1)+"</a> ";e.innerHTML=a,this.paginate_build_flatview(e,t,i)},virtualpaginate.prototype.paginate_build_flatview=function(e,t){var i=this;this.flatviewlinks[t]=e.getElementsByTagName("a");for(var a=0;a<this.flatviewlinks[t].length;a++)this.flatviewlinks[t][a].onclick=function(){var e=(i.currentpage,parseInt(this.getAttribute("rel")));return i.navigate(e),!1};this.flatviewlinks[t][this.currentpage].className="selected",this.flatviewpresent=!0},virtualpaginate.prototype.paginate_build_selectmenu=function(e,t,i){var a=this,i=i||new Array;this.selectmenupresent=1;for(var s=0;s<this.pagecount;s++)e.options[s]="undefined"!=typeof i[s]?new Option(i[s],s):new Option("Page "+(s+1)+" of "+this.pagecount,s);e.selectedIndex=this.currentpage,setTimeout(function(){e.selectedIndex=a.currentpage},500),e.onchange=function(){a.navigate(this.selectedIndex)},this.selectmenu[t]=e,this.selectmenu[t].selectedIndex=this.currentpage},virtualpaginate.prototype.paginate_build_regularlinks=function(e){for(var t=this,i=0;i<e.length;i++){var a=e[i].getAttribute("rel");/^(previous)|(next)|(first)|(last)$/.test(a)&&(e[i].onclick=function(){return t.navigate(this.getAttribute("rel")),!1}),"previous"==a||-1!=e[i].href.indexOf("previous")?(this.wraparound||0!=this.currentpage||virtualpaginate.setcssclass(e[i],"disabled","add"),this.prevlinks.push(e[i])):("next"==a||-1!=e[i].href.indexOf("next"))&&(this.wraparound||this.currentpage!=this.pagecount-1||virtualpaginate.setcssclass(e[i],"disabled","add"),this.nextlinks.push(e[i]))}},virtualpaginate.prototype.paginate_build_cpinfo=function(e,t){this.cpspan[t]=e,e.innerHTML="Page "+(this.currentpage+1)+"/"+this.pagecount};